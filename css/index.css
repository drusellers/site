@import "tailwindcss";
@import "./quote-styles.css" layer(components);
@import "./sidenote.css" layer(components);
@import "./highlight.css" layer(components);
@plugin "@tailwindcss/typography";
@variant dark (&:where(.dark, .dark *));



@theme {
	/* palette */
	--color-oxford-500: #314d65;
	--color-oxford-100: #e0ebe9;
	--color-oxford-600: #254058;
	--color-oxford-200: #d0e3e0;

	--color-bluetide-light-50:  oklch(0.985 0.015 250);
	--color-bluetide-light-100: oklch(0.970 0.018 250);
	--color-bluetide-light-200: oklch(0.950 0.020 250);
	--color-bluetide-light-300: oklch(0.920 0.022 250);
	--color-bluetide-light-400: oklch(0.880 0.024 250);
	--color-bluetide-light-500: oklch(0.820 0.026 250);
	--color-bluetide-light-600: oklch(0.740 0.028 250);
	--color-bluetide-light-700: oklch(0.640 0.030 250);
	--color-bluetide-light-800: oklch(0.520 0.032 250);
	--color-bluetide-light-900: oklch(0.400 0.034 250);
	--color-bluetide-light-950: oklch(0.300 0.036 250);

	--color-bluetide-dark-50:  oklch(0.92   0.020 230.9);
	--color-bluetide-dark-100: oklch(0.85   0.022 230.9);
	--color-bluetide-dark-200: oklch(0.76   0.024 230.9);
	--color-bluetide-dark-300: oklch(0.66   0.026 230.9);
	--color-bluetide-dark-400: oklch(0.56   0.028 230.9);
	--color-bluetide-dark-500: oklch(0.46   0.030 230.9);
	--color-bluetide-dark-600: oklch(0.36   0.031 230.9);
	--color-bluetide-dark-700: oklch(0.29   0.032 230.9);
	--color-bluetide-dark-800: oklch(0.245  0.031 230.9);

	/* your anchor */
	--color-bluetide-dark-900: oklch(0.2195 0.0304 230.9);
	--color-bluetide-dark-950: oklch(0.185  0.032 230.9);

	/* semantic colors */
	--color-success-500: #5a7c6a;
	--color-success-600: #4a6656;
	--color-danger-500: #9d6b6b;
	--color-danger-600: #8d5b5b;
	--color-warning-500: #8b7d5c;
	--color-warning-600: #7b6d4c;

	/* fonts */
	--font-page-title: var(--font-humane, "humane");
	--font-heading: var(--font-space-g, "space grotesk");
	--font-body-text: var(--font-open-sans, "open sans");

	/* components */
	--grid-cols-2cols: "1fr 2fr";

	/* prose overrides */
	--tw-prose-links: var(--color-blue-500);
}

@layer base {
	/* Prevent FOUC by hiding content until theme is resolved */
	:root:not(.theme-loaded) {
		color-scheme: light;
	}
	
	:root:not(.theme-loaded) * {
		opacity: 0 !important;
		transition: opacity 0.1s ease-in-out;
	}
	
	:root.theme-loaded * {
		opacity: 1;
	}

	/* Smooth theme transitions for color-dependent elements */
	html, body {
		transition: background-color var(--dds-theme-transition-duration) ease-in-out;
	}
	
	* {
		transition: color var(--dds-theme-transition-duration) ease-in-out,
					border-color var(--dds-theme-transition-duration) ease-in-out,
					background-color var(--dds-theme-transition-duration) ease-in-out;
	}

	:root {
		/* Font variables injected by next/font in layout.tsx */
		--font-humane: "humane";
		--font-open-sans: "open sans";
		--font-space-g: "space grotesk";

		/* Theme transition duration */
		--dds-theme-transition-duration: 0.3s;

		--bg-page: var(--color-bluetide-light-50);

		--text-page-title-color: var(--color-bluetide-light-700);
		--text-primary-color: var(--color-bluetide-light-950);
		--text-secondary-color: var(--color-bluetide-light-800);

		--logo-color: var(--color-bluetide-light-800);
		--link-color: var(--color-blue-500);

		--social-color: var(--color-bluetide-light-600);
		--social-color-hover: var(--color-bluetide-light-800);

		--layout-divider-color: var(--color-bluetide-light-400);
		--quote-border-color: var(--color-success-500);

		--text-headings-color: var(--color-bluetide-light-800);

		/* Theme toggle colors */
		--dds-toggle-track-light: var(--color-oxford-200);
		--dds-toggle-track-dark: var(--color-oxford-600);
		--dds-toggle-gradient-light: linear-gradient(to right, rgb(251 146 60), rgb(253 224 71));
		--dds-toggle-gradient-dark: linear-gradient(to right, rgb(37 99 235), rgb(96 165 250));
		--dds-toggle-thumb-bg: rgb(255 255 255);
		--dds-toggle-icon-light: rgb(249 115 22);
		--dds-toggle-icon-dark: rgb(37 99 235);
		--dds-toggle-glow-light: rgb(253 186 116);
		--dds-toggle-glow-dark: rgb(96 165 250);
		--dds-toggle-pulse-light: rgb(253 186 116);
		--dds-toggle-pulse-dark: rgb(96 165 250);
	}

	.dark {
		--bg-page: var(--color-bluetide-dark-900);

		--text-page-title-color: var(--color-bluetide-dark-500);
		--text-primary-color: var(--color-bluetide-dark-200);
		--text-secondary-color: var(--color-bluetide-dark-400);

		--logo-color: var(--color-bluetide-dark-300);
		--link-color: oklch(0.5223 0.1861 258.58);

		--social-color: var(--color-bluetide-dark-600);
		--social-color-hover: var(--color-bluetide-dark-400);

		--layout-divider-color: var(--color-bluetide-dark-700);
		--quote-border-color: var(--color-success-600);

		--text-headings-color: var(--color-bluetide-dark-400);

		/* Theme toggle colors - dark mode */
		--dds-toggle-track-light: var(--color-oxford-600);
		--dds-toggle-track-dark: var(--color-oxford-200);
		--dds-toggle-gradient-light: linear-gradient(to right, rgb(253 186 116), rgb(253 224 71));
		--dds-toggle-gradient-dark: linear-gradient(to right, rgb(37 99 235), rgb(96 165 250));
		--dds-toggle-thumb-bg: rgb(255 255 255);
		--dds-toggle-icon-light: rgb(249 115 22);
		--dds-toggle-icon-dark: rgb(37 99 235);
		--dds-toggle-glow-light: rgb(253 186 116);
		--dds-toggle-glow-dark: rgb(96 165 250);
		--dds-toggle-pulse-light: rgb(253 186 116);
		--dds-toggle-pulse-dark: rgb(96 165 250);
	}

	body {
		/*https://developer.mozilla.org/en-US/docs/Web/CSS/gradient/radial-gradient()*/
		/* matte-white */
		/*background: radial-gradient(circle at 100%, #ECE9E6, #ECE9E6 50%, #fff 75%, #ECE9E6 75%);*/
		/* clouds */
		/*background: radial-gradient(ellipse at top, #ECE9E6, transparent),*/
		/*radial-gradient(ellipse at bottom, #fff, transparent);*/
		font-family: var(--font-body-text), "sans-serif";
		
		/* Smooth theme transitions */
		transition: 
			background-color var(--dds-theme-transition-duration) ease-in-out,
			color var(--dds-theme-transition-duration) ease-in-out;
	}


	/* links: https://frontendmasters.com/blog/chilled-out-text-underlines/ */
	a {
		color: var(--link-color);
		font-family: var(--font-body-text), "sans-serif";
		text-decoration: underline;
		text-underline-offset: 2px;
		transition: color var(--dds-theme-transition-duration) ease-in-out;
	}

	a:not(:is(:hover, :focus)) {
		text-decoration-color: color-mix(in srgb, currentColor, transparent 75%);
	}

	p {
		font-family: var(--font-body-text), "sans-serif";
	}

	h1,
	h2,
	h3,
	h4,
	h5,
	h6 {
		font-family: var(--font-heading), "serif";
	}
}

@layer utilities {
	/* Tailwind Customizations of Prose */
	.prose > article > p:first-child {
		margin-top: 0;
	}
}

@layer components {
	/* links: https://frontendmasters.com/blog/chilled-out-text-underlines/ */
	.prose-drusellers a:not(:is(:hover, :focus)) {
		text-decoration-color: color-mix(in srgb, currentColor, transparent 75%);
	}
	
	/* Also target regular prose for broader coverage */
	.prose a:not(:is(:hover, :focus)) {
		text-decoration-color: color-mix(in srgb, currentColor, transparent 75%);
	}
}

@theme inline {
	--color-page-background: var(--bg-page);

	--color-text-page-title: var(--text-page-title-color);
    --color-text-body: var(--text-primary-color);
    --color-text-primary: var(--text-primary-color);
	--color-text-secondary: var(--text-secondary-color);

	--color-logo: var(--logo-color);


	--color-social: var(--social-color);
	--color-social-hover: var(--social-color-hover);

	--color-layout-divider: var(--layout-divider-color);
}

@utility prose-drusellers {
	--tw-prose-body: var(--text-primary-color);
	--tw-prose-quotes: var(--text-primary-color);
	--tw-prose-quote-borders: var(--quote-border-color);
	--tw-prose-links: var(--link-color);
	--tw-prose-bold: var(--text-primary-color);

	--tw-prose-code: var(--text-primary-color);
	--tw-prose-pre-code: var(--text-primary-color);
	--tw-prose-bullets: var(--text-secondary-color);
	--tw-prose-headings: var(--text-headings-color);
	--tw-prose-counters: var(--text-secondary-color);

	/* */

	--tw-prose-lead: var(--color-pink-700);
	--tw-prose-hr: var(--color-pink-300);
	--tw-prose-captions: var(--color-pink-700);
	--tw-prose-pre-bg: var(--color-pink-900);
	--tw-prose-th-borders: var(--color-pink-300);
	--tw-prose-td-borders: var(--color-pink-200);

	/* dark mode */
	--tw-prose-invert-body: var(--color-pink-200);
	--tw-prose-invert-headings: var(--color-white);
	--tw-prose-invert-lead: var(--color-pink-300);
	--tw-prose-invert-links: var(--color-white);
	--tw-prose-invert-bold: var(--color-white);
	--tw-prose-invert-counters: var(--color-pink-400);
	--tw-prose-invert-bullets: var(--color-pink-600);
	--tw-prose-invert-hr: var(--color-pink-700);
	--tw-prose-invert-quotes: var(--color-pink-100);
	--tw-prose-invert-quote-borders: var(--color-pink-700);
	--tw-prose-invert-captions: var(--color-pink-400);
	--tw-prose-invert-code: var(--color-white);
	--tw-prose-invert-pre-code: var(--color-pink-300);
	--tw-prose-invert-pre-bg: rgb(0 0 0 / 50%);
	--tw-prose-invert-th-borders: var(--color-pink-600);
	--tw-prose-invert-td-borders: var(--color-pink-700);
}